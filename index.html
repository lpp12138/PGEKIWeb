<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PGEKI Web Configurator</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div id="sidebar" class="collapsed">
        <div class="sidebar-content">
            <h3>工具箱</h3>
            <button id="show-keycode-list-btn">📖查看键码</button>
            <button id="reset-lights-btn">✨重置灯光</button>
            <button id="reset-key-btn">⌨️重置按键</button>
            <button id="reset-all-btn">💥重置全部</button>
            <h3 id="io-mode-controls-header">IO设置</h3>
            <div id="io-mode-controls">
                <label for="io-light-override-switch">接管IO灯光</label>
                <label class="switch">
                    <input type="checkbox" id="io-light-override-switch">
                    <span class="slider round"></span>
                </label>
            </div>
            <h3>其他设置</h3>
            <button id="save-config-btn">💾保存配置</button>
            <button id="load-config-btn">📁载入配置</button>
            <div id="io-mode-controls">
                <label for="theme-checkbox">🗘切换主题</label>
                <label class="switch">
                    <input type="checkbox" id="theme-checkbox" />
                    <span class="slider round"></span>
                </label>
            </div>
        </div>
    </div>
    <div id="sidebar-toggle">
        <span></span>
        <span></span>
        <span></span>
    </div>

    <header class="header">
        <div class="header-left">
            <div class="profiles">
                <div class="profile-slot active">IO</div>
                <div class="profile-slot">1</div>
                <div class="profile-slot">2</div>
                <div class="profile-slot">3</div>
                <div class="profile-slot">4</div>
                <div class="profile-slot">5</div>
            </div>
        </div>
        <div class="header-right">
            <input type="file" id="load-config-input" accept=".json" style="display: none;">
            <button id="connect-btn">点我连接设备喵</button>
        </div>
    </header>

    <main class="main-content">
        <div class="keyboard">
            <div class="key key-rect" data-key-id="0"><span></span></div>
            <div class="key-group">
                <div class="key key-square" data-key-id="1"><span></span></div>
                <div class="key key-square" data-key-id="2"><span></span></div>
                <div class="key key-square" data-key-id="3"><span></span></div>
                <div class="key-separator"></div>
                <div class="key key-square" data-key-id="4"><span></span></div>
                <div class="key key-square" data-key-id="5"><span></span></div>
                <div class="key key-square" data-key-id="6"><span></span></div>
            </div>
            <div class="key key-rect" data-key-id="7"><span></span></div>
        </div>
        <div class="small-keys-container">
            <div class="key key-circle" data-key-id="8"><span></span></div>
            <div class="key key-circle key-disabled"><span></span></div>
            <div class="key key-circle" data-key-id="9"><span></span></div>
        </div>
    </main>

    <div id="config-modal" class="modal-container" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>按键配置</h2>
                <span class="close-btn">&times;</span>
            </div>
            <div class="config-item" id="key-color-item">
                <label for="key-color">颜色:</label>
                <input type="color" id="key-color" value="#ffffff">
            </div>
            <div class="config-item" id="key-code-item">
                <label>键位:</label>
                <div class="key-input-wrapper">
                    <div id="record-mode">
                        <button id="record-key-btn">开始录制 🔴</button>
                        <code id="current-key-display">无</code>
                    </div>
                    <div id="manual-mode" style="display: none;">
                        <input type="text" id="key-code-input" placeholder="按键键码 例如: 0x04">
                    </div>
                </div>
                <button id="toggle-input-mode-btn" title="切换输入模式">⇄</button>
            </div>
            <button id="save-btn">保存更改 ✔️</button>
        </div>
    </div>

    <div id="keycode-list-modal" class="keycode-modal-overlay" style="display: none;">
        <div class="keycode-modal-content">
            <div class="keycode-modal-header">
                <h2>HID Keycode 列表 📚</h2>
                <span class="keycode-modal-close-btn">&times;</span>
            </div>
            <div class="keycode-modal-body">
                <div class="keycode-category">
                    <h3>Letters</h3>
                    <div class="keycode-entry"><span class="name">A</span><span class="code">0x04</span></div>
                    <div class="keycode-entry"><span class="name">B</span><span class="code">0x05</span></div>
                    <div class="keycode-entry"><span class="name">C</span><span class="code">0x06</span></div>
                    <div class="keycode-entry"><span class="name">D</span><span class="code">0x07</span></div>
                    <div class="keycode-entry"><span class="name">E</span><span class="code">0x08</span></div>
                    <div class="keycode-entry"><span class="name">F</span><span class="code">0x09</span></div>
                    <div class="keycode-entry"><span class="name">G</span><span class="code">0x0A</span></div>
                    <div class="keycode-entry"><span class="name">H</span><span class="code">0x0B</span></div>
                    <div class="keycode-entry"><span class="name">I</span><span class="code">0x0C</span></div>
                    <div class="keycode-entry"><span class="name">J</span><span class="code">0x0D</span></div>
                    <div class="keycode-entry"><span class="name">K</span><span class="code">0x0E</span></div>
                    <div class="keycode-entry"><span class="name">L</span><span class="code">0x0F</span></div>
                    <div class="keycode-entry"><span class="name">M</span><span class="code">0x10</span></div>
                    <div class="keycode-entry"><span class="name">N</span><span class="code">0x11</span></div>
                    <div class="keycode-entry"><span class="name">O</span><span class="code">0x12</span></div>
                    <div class="keycode-entry"><span class="name">P</span><span class="code">0x13</span></div>
                    <div class="keycode-entry"><span class="name">Q</span><span class="code">0x14</span></div>
                    <div class="keycode-entry"><span class="name">R</span><span class="code">0x15</span></div>
                    <div class="keycode-entry"><span class="name">S</span><span class="code">0x16</span></div>
                    <div class="keycode-entry"><span class="name">T</span><span class="code">0x17</span></div>
                    <div class="keycode-entry"><span class="name">U</span><span class="code">0x18</span></div>
                    <div class="keycode-entry"><span class="name">V</span><span class="code">0x19</span></div>
                    <div class="keycode-entry"><span class="name">W</span><span class="code">0x1A</span></div>
                    <div class="keycode-entry"><span class="name">X</span><span class="code">0x1B</span></div>
                    <div class="keycode-entry"><span class="name">Y</span><span class="code">0x1C</span></div>
                    <div class="keycode-entry"><span class="name">Z</span><span class="code">0x1D</span></div>
                </div>
                <div class="keycode-category">
                    <h3>Numbers &amp; Symbols (Top Row)</h3>
                    <div class="keycode-entry"><span class="name">1 !</span><span class="code">0x1E</span></div>
                    <div class="keycode-entry"><span class="name">2 @</span><span class="code">0x1F</span></div>
                    <div class="keycode-entry"><span class="name">3 #</span><span class="code">0x20</span></div>
                    <div class="keycode-entry"><span class="name">4 $</span><span class="code">0x21</span></div>
                    <div class="keycode-entry"><span class="name">5 %</span><span class="code">0x22</span></div>
                    <div class="keycode-entry"><span class="name">6 ^</span><span class="code">0x23</span></div>
                    <div class="keycode-entry"><span class="name">7 &amp;</span><span class="code">0x24</span></div>
                    <div class="keycode-entry"><span class="name">8 *</span><span class="code">0x25</span></div>
                    <div class="keycode-entry"><span class="name">9 (</span><span class="code">0x26</span></div>
                    <div class="keycode-entry"><span class="name">0 )</span><span class="code">0x27</span></div>
                    <div class="keycode-entry"><span class="name">- _</span><span class="code">0x2D</span></div>
                    <div class="keycode-entry"><span class="name">= +</span><span class="code">0x2E</span></div>
                    <div class="keycode-entry"><span class="name">[ {</span><span class="code">0x2F</span></div>
                    <div class="keycode-entry"><span class="name">] }</span><span class="code">0x30</span></div>
                    <div class="keycode-entry"><span class="name">\ |</span><span class="code">0x31</span></div>
                    <div class="keycode-entry"><span class="name">; :</span><span class="code">0x33</span></div>
                    <div class="keycode-entry"><span class="name">' "</span><span class="code">0x34</span></div>
                    <div class="keycode-entry"><span class="name">` ~</span><span class="code">0x35</span></div>
                    <div class="keycode-entry"><span class="name">, &lt;</span><span class="code">0x36</span></div>
                    <div class="keycode-entry"><span class="name">. &gt;</span><span class="code">0x37</span></div>
                    <div class="keycode-entry"><span class="name">/ ?</span><span class="code">0x38</span></div>
                </div>
                <div class="keycode-category">
                    <h3>Function Keys</h3>
                    <div class="keycode-entry"><span class="name">F1</span><span class="code">0x3A</span></div>
                    <div class="keycode-entry"><span class="name">F2</span><span class="code">0x3B</span></div>
                    <div class="keycode-entry"><span class="name">F3</span><span class="code">0x3C</span></div>
                    <div class="keycode-entry"><span class="name">F4</span><span class="code">0x3D</span></div>
                    <div class="keycode-entry"><span class="name">F5</span><span class="code">0x3E</span></div>
                    <div class="keycode-entry"><span class="name">F6</span><span class="code">0x3F</span></div>
                    <div class="keycode-entry"><span class="name">F7</span><span class="code">0x40</span></div>
                    <div class="keycode-entry"><span class="name">F8</span><span class="code">0x41</span></div>
                    <div class="keycode-entry"><span class="name">F9</span><span class="code">0x42</span></div>
                    <div class="keycode-entry"><span class="name">F10</span><span class="code">0x43</span></div>
                    <div class="keycode-entry"><span class="name">F11</span><span class="code">0x44</span></div>
                    <div class="keycode-entry"><span class="name">F12</span><span class="code">0x45</span></div>
                    <div class="keycode-entry"><span class="name">F13</span><span class="code">0x68</span></div>
                    <div class="keycode-entry"><span class="name">F14</span><span class="code">0x69</span></div>
                    <div class="keycode-entry"><span class="name">F15</span><span class="code">0x6A</span></div>
                    <div class="keycode-entry"><span class="name">F16</span><span class="code">0x6B</span></div>
                    <div class="keycode-entry"><span class="name">F17</span><span class="code">0x6C</span></div>
                    <div class="keycode-entry"><span class="name">F18</span><span class="code">0x6D</span></div>
                    <div class="keycode-entry"><span class="name">F19</span><span class="code">0x6E</span></div>
                    <div class="keycode-entry"><span class="name">F20</span><span class="code">0x6F</span></div>
                    <div class="keycode-entry"><span class="name">F21</span><span class="code">0x70</span></div>
                    <div class="keycode-entry"><span class="name">F22</span><span class="code">0x71</span></div>
                    <div class="keycode-entry"><span class="name">F23</span><span class="code">0x72</span></div>
                    <div class="keycode-entry"><span class="name">F24</span><span class="code">0x73</span></div>
                </div>
                <div class="keycode-category">
                    <h3>Control &amp; Navigation</h3>
                    <div class="keycode-entry"><span class="name">Enter</span><span class="code">0x28</span></div>
                    <div class="keycode-entry"><span class="name">Escape</span><span class="code">0x29</span></div>
                    <div class="keycode-entry"><span class="name">Backspace</span><span class="code">0x2A</span></div>
                    <div class="keycode-entry"><span class="name">Tab</span><span class="code">0x2B</span></div>
                    <div class="keycode-entry"><span class="name">Space</span><span class="code">0x2C</span></div>
                    <div class="keycode-entry"><span class="name">CapsLock</span><span class="code">0x39</span></div>
                    <div class="keycode-entry"><span class="name">PrintScreen</span><span class="code">0x46</span></div>
                    <div class="keycode-entry"><span class="name">ScrollLock</span><span class="code">0x47</span></div>
                    <div class="keycode-entry"><span class="name">Pause</span><span class="code">0x48</span></div>
                    <div class="keycode-entry"><span class="name">Insert</span><span class="code">0x49</span></div>
                    <div class="keycode-entry"><span class="name">Home</span><span class="code">0x4A</span></div>
                    <div class="keycode-entry"><span class="name">PageUp</span><span class="code">0x4B</span></div>
                    <div class="keycode-entry"><span class="name">Delete</span><span class="code">0x4C</span></div>
                    <div class="keycode-entry"><span class="name">End</span><span class="code">0x4D</span></div>
                    <div class="keycode-entry"><span class="name">PageDown</span><span class="code">0x4E</span></div>
                    <div class="keycode-entry"><span class="name">→</span><span class="code">0x4F</span></div>
                    <div class="keycode-entry"><span class="name">←</span><span class="code">0x50</span></div>
                    <div class="keycode-entry"><span class="name">↓</span><span class="code">0x51</span></div>
                    <div class="keycode-entry"><span class="name">↑</span><span class="code">0x52</span></div>
                </div>
                <div class="keycode-category">
                    <h3>Modifier Keys</h3>
                    <div class="keycode-entry"><span class="name">Left Control</span><span class="code">0xE0</span></div>
                    <div class="keycode-entry"><span class="name">Left Shift</span><span class="code">0xE1</span></div>
                    <div class="keycode-entry"><span class="name">Left Alt</span><span class="code">0xE2</span></div>
                    <div class="keycode-entry"><span class="name">Left GUI (Win/Cmd)</span><span class="code">0xE3</span></div>
                    <div class="keycode-entry"><span class="name">Right Control</span><span class="code">0xE4</span></div>
                    <div class="keycode-entry"><span class="name">Right Shift</span><span class="code">0xE5</span></div>
                    <div class="keycode-entry"><span class="name">Right Alt</span><span class="code">0xE6</span></div>
                    <div class="keycode-entry"><span class="name">Right GUI (Win/Cmd)</span><span class="code">0xE7</span></div>
                </div>
                <div class="keycode-category">
                    <h3>Numpad</h3>
                    <div class="keycode-entry"><span class="name">NumLock</span><span class="code">0x53</span></div>
                    <div class="keycode-entry"><span class="name">Num /</span><span class="code">0x54</span></div>
                    <div class="keycode-entry"><span class="name">Num *</span><span class="code">0x55</span></div>
                    <div class="keycode-entry"><span class="name">Num -</span><span class="code">0x56</span></div>
                    <div class="keycode-entry"><span class="name">Num +</span><span class="code">0x57</span></div>
                    <div class="keycode-entry"><span class="name">Num Enter</span><span class="code">0x58</span></div>
                    <div class="keycode-entry"><span class="name">Num 1 End</span><span class="code">0x59</span></div>
                    <div class="keycode-entry"><span class="name">Num 2 ↓</span><span class="code">0x5A</span></div>
                    <div class="keycode-entry"><span class="name">Num 3 PgDn</span><span class="code">0x5B</span></div>
                    <div class="keycode-entry"><span class="name">Num 4 ←</span><span class="code">0x5C</span></div>
                    <div class="keycode-entry"><span class="name">Num 5</span><span class="code">0x5D</span></div>
                    <div class="keycode-entry"><span class="name">Num 6 →</span><span class="code">0x5E</span></div>
                    <div class="keycode-entry"><span class="name">Num 7 Home</span><span class="code">0x5F</span></div>
                    <div class="keycode-entry"><span class="name">Num 8 ↑</span><span class="code">0x60</span></div>
                    <div class="keycode-entry"><span class="name">Num 9 PgUp</span><span class="code">0x61</span></div>
                    <div class="keycode-entry"><span class="name">Num 0 Ins</span><span class="code">0x62</span></div>
                    <div class="keycode-entry"><span class="name">Num . Del</span><span class="code">0x63</span></div>
                </div>
                <div class="keycode-category">
                    <h3>Media Keys</h3>
                    <div class="keycode-entry"><span class="name">Volume Up</span><span class="code">0xE9</span></div>
                    <div class="keycode-entry"><span class="name">Volume Down</span><span class="code">0xEA</span></div>
                    <div class="keycode-entry"><span class="name">Mute</span><span class="code">0xE2</span></div>
                    <div class="keycode-entry"><span class="name">Play/Pause</span><span class="code">0xCD</span></div>
                    <div class="keycode-entry"><span class="name">Stop</span><span class="code">0xB7</span></div>
                    <div class="keycode-entry"><span class="name">Next Track</span><span class="code">0xB5</span></div>
                    <div class="keycode-entry"><span class="name">Previous Track</span><span class="code">0xB6</span></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Custom Alert Modal -->
    <div id="custom-alert-modal" class="custom-modal-overlay" style="display: none;">
        <div class="custom-modal-content">
            <p id="custom-alert-text"></p>
            <button id="custom-alert-ok-btn">知道了喵!</button>
        </div>
    </div>

    <!-- Custom Confirm Modal -->
    <div id="custom-confirm-modal" class="custom-modal-overlay" style="display: none;">
        <div class="custom-modal-content">
            <p id="custom-confirm-text"></p>
            <div class="custom-modal-buttons">
                <button id="custom-confirm-yes-btn">确定</button>
                <button id="custom-confirm-no-btn">取消</button>
            </div>
        </div>
    </div>

    <script src="./script.js"></script>
</body>
</html> 